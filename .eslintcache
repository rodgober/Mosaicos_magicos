[{"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\index.js":"1","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\App.js":"2","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\reportWebVitals.js":"3","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\salas\\salaState.js":"4","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Juegayaprende.js":"5","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\salas\\salaReducer.js":"6","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\salas\\salaContext.js":"7","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\types\\index.js":"8","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Header.js":"9","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Secciones.js":"10","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Almacenes.js":"11","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Horno.js":"12","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Murales.js":"13","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Collages.js":"14","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Programacion.js":"15","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\helper.js":"16","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Amosaico.js":"17","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\types\\imgbotones.js":"18","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Colores.js":"19","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Figuras.js":"20","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Mosaico.js":"21","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Variantes.js":"22","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Player.js":"23","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Sala.js":"24","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Almacencollages.js":"25","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Controles.js":"26","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Panelprograma.js":"27","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Nuevainstruccion.js":"28","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Errorinput.js":"29","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\programa\\programaState.js":"30","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\programa\\programaReducer.js":"31","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\programa\\programaContext.js":"32","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Instruccionclass.js":"33","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Instruccion.js":"34"},{"size":288,"mtime":1607660916545,"results":"35","hashOfConfig":"36"},{"size":268,"mtime":1608587427942,"results":"37","hashOfConfig":"36"},{"size":362,"mtime":499162500000,"results":"38","hashOfConfig":"36"},{"size":2259,"mtime":1609790195253,"results":"39","hashOfConfig":"36"},{"size":544,"mtime":1608587640059,"results":"40","hashOfConfig":"36"},{"size":964,"mtime":1608693114191,"results":"41","hashOfConfig":"36"},{"size":109,"mtime":1608072096972,"results":"42","hashOfConfig":"36"},{"size":2223,"mtime":1609796840199,"results":"43","hashOfConfig":"36"},{"size":2817,"mtime":1608587598439,"results":"44","hashOfConfig":"36"},{"size":4200,"mtime":1608846130351,"results":"45","hashOfConfig":"36"},{"size":11274,"mtime":1609282582710,"results":"46","hashOfConfig":"36"},{"size":6395,"mtime":1609280739102,"results":"47","hashOfConfig":"36"},{"size":9844,"mtime":1609299756439,"results":"48","hashOfConfig":"36"},{"size":10583,"mtime":1609302233739,"results":"49","hashOfConfig":"36"},{"size":7047,"mtime":1609374701215,"results":"50","hashOfConfig":"36"},{"size":3504,"mtime":1609298624463,"results":"51","hashOfConfig":"36"},{"size":2287,"mtime":1608598372299,"results":"52","hashOfConfig":"36"},{"size":14579,"mtime":1608079478827,"results":"53","hashOfConfig":"36"},{"size":11678,"mtime":1608587577386,"results":"54","hashOfConfig":"36"},{"size":9935,"mtime":1608587586781,"results":"55","hashOfConfig":"36"},{"size":13653,"mtime":1608595036442,"results":"56","hashOfConfig":"36"},{"size":19119,"mtime":1608587702494,"results":"57","hashOfConfig":"36"},{"size":1475,"mtime":1608587658724,"results":"58","hashOfConfig":"36"},{"size":3129,"mtime":1609791670814,"results":"59","hashOfConfig":"36"},{"size":12383,"mtime":1609302510004,"results":"60","hashOfConfig":"36"},{"size":1023,"mtime":1609373529846,"results":"61","hashOfConfig":"36"},{"size":1873,"mtime":1609807800992,"results":"62","hashOfConfig":"36"},{"size":10450,"mtime":1609808137958,"results":"63","hashOfConfig":"36"},{"size":149,"mtime":1609783254340,"results":"64","hashOfConfig":"36"},{"size":818,"mtime":1609797979581,"results":"65","hashOfConfig":"36"},{"size":325,"mtime":1609797027492,"results":"66","hashOfConfig":"36"},{"size":116,"mtime":1609797408542,"results":"67","hashOfConfig":"36"},{"size":331,"mtime":1609806624574,"results":"68","hashOfConfig":"36"},{"size":1266,"mtime":1609808135694,"results":"69","hashOfConfig":"36"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},"kuyef4",{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"72"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"72"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"72"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"122","messages":"123","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"124","usedDeprecatedRules":"72"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"129","messages":"130","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"135","messages":"136","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\index.js",[],["143","144"],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\App.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\reportWebVitals.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\salas\\salaState.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Juegayaprende.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\salas\\salaReducer.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\salas\\salaContext.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\types\\index.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Header.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Secciones.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Almacenes.js",["145","146","147"],"import React, { useContext, useEffect } from 'react';\r\nimport salaContext from '../context/salas/salaContext'\r\nimport styles from './Almacenes.module.css';\r\n\r\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\r\nimport Button from '@material-ui/core/Button';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { obtenerXInicialMos, obtenerYInicialMos, obtenerMosXSeleccionado, obtenerXDelMosSeleccionado, obtenerLargoAlmacen, obtenerAltoAlmacen, obtenerNumMosaicosXLargoImagen } from '../helper';\r\n\r\nconst Almacenes = React.forwardRef((props,ref) => {\r\n\r\n    const refInput = React.createRef();\r\n\r\n    const salaContexto = useContext(salaContext);\r\n    const { alto, largo, separacion, almacen, setAlmacen, mosSeleccionado, setMosSeleccionado, guardarAlmacen, setGuardarAlmacen } = salaContexto;\r\n    const canvasRef = ref;\r\n\r\n    useEffect(() => {\r\n        const almacenMos = localStorage.getItem('almacenMos');  //lee de localStorage la variable\r\n        if(almacenMos != null){   \r\n            const canvasAlm = canvasRef.current;\r\n            const ctxAlm = canvasAlm.getContext('2d'); //Crea el contexto donde pintará el mosaico seleccionado \r\n            ctxAlm.restore();\r\n            ctxAlm.fillStyle = 'white';\r\n            ctxAlm.strokeStyle = 'white';  \r\n            ctxAlm.fillRect(0, 0, canvasAlm.width, canvasAlm.height);\r\n            setMosSeleccionado(0);\r\n\r\n            let img = new Image();\r\n            img.src = almacenMos;\r\n\r\n            img.onload = function() {\r\n                let numMos = obtenerNumMosaicosXLargoImagen(img.naturalWidth, largo, separacion);\r\n                setAlmacen(numMos);\r\n                ctxAlm.drawImage(img, 0, 0, img.width, img.height);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n\r\n    useEffect (()=>{\r\n        if (guardarAlmacen){\r\n            const canvas = canvasRef.current;\r\n            let canvasdwn = document.createElement('canvas');\r\n            canvasdwn.width = obtenerLargoAlmacen(almacen, largo, separacion); //le coloca el largo del canvas dependiendo de los mosaicos\r\n            canvasdwn.height = obtenerAltoAlmacen(alto, separacion);//coloca el alto del canvas\r\n            var destCtx = canvasdwn.getContext('2d');\r\n            destCtx.drawImage(canvas, 0, 0); //Copia la imagen del canvas del almacen al canvas que va a descargar con el tamaño mínimo necesario\r\n            let dataImg = canvasdwn.toDataURL(); //convierte la imagen a una cadena base 64\r\n            localStorage.setItem('almacenMos', dataImg); //guarda la cadena en base 64 en el Local Storage\r\n            setGuardarAlmacen(false);\r\n        }\r\n    }, [guardarAlmacen]);\r\n\r\n\r\n    const handleChange = e => {\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        let rect = canvas.getBoundingClientRect();\r\n        let x = e.clientX - rect.left; //Obtiene coordenada X donde el usuario dio clic\r\n        let y = e.clientY - rect.top; // Obtiene coordenada Y donde el usuario dio clic\r\n        let numMos = obtenerMosXSeleccionado(x, largo, separacion); //Obtenemos el numero de mosaico seleccionado\r\n        if (numMos !== mosSeleccionado && numMos <= almacen) { //El mosaico debe ser diferente al seleccionado con anterioridad y debe ser menor al tamaño del almacen\r\n            ctx.strokeStyle = 'white'; //El color blanco del cuadro para borrar la seleccion del mosaico seleccionado con anterioridad\r\n            ctx.lineWidth = 3; //Grosor 3 para borar el marco negrocon grosor 2\r\n            let xx = obtenerXDelMosSeleccionado(mosSeleccionado, largo, separacion); //Obtiene la coordenada X del mosaico seleccionado\r\n            ctx.strokeRect(xx, 0, separacion + largo + separacion, separacion + alto + separacion); // imprime el marco blanco\r\n            ctx.strokeStyle = 'black'; //Coloca el color negro para el marco del mosaico seleccionado\r\n            ctx.lineWidth = 2; //El marco de grosor 2 para que pueda ser borrado por el marco blanco\r\n            const xInicialMos = obtenerXInicialMos(x, largo, separacion); //Se obtiene la coordenada X del marco a pintar \r\n            const yInicialMos = obtenerYInicialMos(y, alto, separacion); //Se obtiene la coordenada Y del marco a pintar \r\n            ctx.strokeRect(xInicialMos, yInicialMos, separacion + largo + separacion, separacion + alto + separacion); //Se pinta el marco negro \r\n            setMosSeleccionado(numMos);//Guarda el nuevo mosaico seleccionado   \r\n        }\r\n    }\r\n\r\n    const abrirAlmacen = e => {\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'white';\r\n        ctx.strokeStyle = 'white';  \r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        setMosSeleccionado(0);//Ya no hay mosaico seleccionado\r\n    \r\n        const img = new Image();\r\n        const file = e.target.files[0];\r\n        const reader = new FileReader();\r\n      \r\n        reader.addEventListener(\"load\", function () {\r\n          img.src = reader.result;\r\n        }, false);\r\n      \r\n        if (file) {\r\n          reader.readAsDataURL(file);\r\n        }\r\n    \r\n        img.onload = function() {\r\n            let numMos = obtenerNumMosaicosXLargoImagen(img.naturalWidth, largo, separacion);\r\n            setAlmacen(numMos);\r\n          ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight);\r\n        };\r\n        console.log(img.naturalWidth);\r\n    }\r\n        \r\n    const eliminartodos = () => {\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'white';\r\n        ctx.strokeStyle = 'white';  \r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        setAlmacen(0);\r\n        setMosSeleccionado(0);//Ya no hay mosaico seleccionado\r\n    }\r\n\r\n    const borrarMos = () => {\r\n        if (mosSeleccionado > 0 && almacen > 0){  //Si existen mosaicos en el almacen y hay alguno seleccionado\r\n            const canvas = canvasRef.current;\r\n            const ctx = canvas.getContext('2d');\r\n            ctx.strokeStyle = 'white'; //El color blanco del cuadro para borrar la seleccion del mosaico seleccionado con anterioridad\r\n            ctx.lineWidth = 3; //Grosor 3 para borar el marco negrocon grosor 2\r\n            let xx = obtenerXDelMosSeleccionado(mosSeleccionado, largo, separacion); //Obtiene la coordenada X del mosaico seleccionado\r\n            ctx.strokeRect(xx, 0, separacion + largo + separacion, separacion + alto + separacion); // imprime el marco blanco\r\n            xx = obtenerXDelMosSeleccionado(mosSeleccionado+1, largo, separacion);\r\n            var imgData = ctx.getImageData(xx, 0, canvas.width-xx, canvas.height); //Obtiene la imagen  del canvas del mosaico en TRANSICION   \r\n            xx = obtenerXDelMosSeleccionado(mosSeleccionado, largo, separacion);          \r\n            ctx.putImageData(imgData, xx, 0);\r\n            setAlmacen(almacen -1);\r\n            setMosSeleccionado(0);//Ya no hay mosaico seleccionado\r\n        }\r\n    }\r\n\r\n    const guardar = () => {\r\n        if (almacen > 0){\r\n            const canvas = canvasRef.current;\r\n            if (mosSeleccionado > 0){  //Si existen mosaicos en el almacen y hay alguno seleccionado\r\n                \r\n                const ctx = canvas.getContext('2d');\r\n                ctx.strokeStyle = 'white'; //El color blanco del cuadro para borrar la seleccion del mosaico seleccionado con anterioridad\r\n                ctx.lineWidth = 3; //Grosor 3 para borar el marco negrocon grosor 2\r\n                let xx = obtenerXDelMosSeleccionado(mosSeleccionado, largo, separacion); //Obtiene la coordenada X del mosaico seleccionado\r\n                ctx.strokeRect(xx, 0, separacion + largo + separacion, separacion + alto + separacion); // imprime el marco blanco\r\n                setMosSeleccionado(0);//Ya no hay mosaico seleccionado\r\n            }\r\n            let canvasdwn = document.createElement('canvas'); //Crea el canvas que va a descargar\r\n            canvasdwn.width = obtenerLargoAlmacen(almacen, largo, separacion); //le coloca el largo del canvas dependiendo de los mosaicos\r\n            canvasdwn.height = obtenerAltoAlmacen(alto, separacion);//coloca el alto del canvas\r\n            var destCtx = canvasdwn.getContext('2d');\r\n            destCtx.drawImage(canvas, 0, 0); //Copia la imagen del canvas del almacen al canvas que va a descargar con el tamaño mínimo necesario\r\n            let downloadLink = document.createElement('a');\r\n            downloadLink.setAttribute('download', 'almacen.png');\r\n            let dataURL = canvasdwn.toDataURL('image/png');\r\n            let url = dataURL.replace(/^data:image\\/png/,'data:application/octet-stream');\r\n            downloadLink.setAttribute('href',url);\r\n            downloadLink.click();\r\n        }\r\n    }\r\n\r\n    return ( \r\n        <div className={`${styles.tercera_seccion}`} >\r\n            <div className={`${styles.contenedor_almacen}`} >\r\n                <canvas\r\n                    ref={ref}\r\n                    id='canv'\r\n                    width='1000'\r\n                    height={separacion + largo + separacion}\r\n                    onClick={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className={`${styles.contenedor_botones}`}>\r\n                    <Button\r\n                        component=\"label\"\r\n                    >\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"fileUpload\"\r\n                            style={{ display: \"none\" }}\r\n                            onChange={abrirAlmacen}\r\n                            ref={refInput}\r\n                        />\r\n                        <FolderOpenIcon\r\n                            style={{ fontSize: 35 }}\r\n                        ></FolderOpenIcon>\r\n                    </Button>\r\n\r\n                    <Button\r\n                        type=\"button\"\r\n                        onClick={ () => guardar() }\r\n                    >\r\n                    <SaveIcon\r\n                        style={{ fontSize: 35 }}\r\n                    >\r\n                    </SaveIcon>\r\n                    </Button>\r\n\r\n                    <Button\r\n                            type=\"button\"\r\n                            onClick={ () => borrarMos() }\r\n                        >\r\n                        <HighlightOffIcon\r\n                            type=\"button\"\r\n                            fontSize=\"small\"\r\n                            style={{ color: 'blue' }}\r\n                            style={{ fontSize: 35 }}\r\n                    \r\n                        ></HighlightOffIcon>\r\n                    </Button>\r\n\r\n                    <Button\r\n                                type=\"button\"\r\n                                onClick={ () => eliminartodos() }\r\n                            >\r\n                        <DeleteOutlineIcon\r\n                            style={{ fontSize: 35 }}\r\n                        ></DeleteOutlineIcon>\r\n                    </Button>\r\n            </div>\r\n        </div> \r\n     );\r\n});\r\n\r\nAlmacenes.protoTypes = {\r\n    ref: PropTypes.node.isRequired \r\n}\r\n \r\nexport default Almacenes;","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Horno.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Murales.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Collages.js",["148"],"import React, { useEffect, useContext, useState } from 'react';\r\nimport salaContext from '../context/salas/salaContext'\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Collages.module.css';\r\n\r\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport Button from '@material-ui/core/Button';\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\nimport { obtenerXinicialCollage, obtenerYinicialCollage, obtenerLargoSeccionCollage, obtenerAltoSeccionCollage } from '../helper';\r\n\r\n\r\nconst Collages = React.forwardRef((props,ref) => {\r\n\r\n    const canvasAlmaCollage = ref;  // Toma la referencia del canvas del Almacen que se pasa por parámetro en la llamada del componente\r\n\r\n\r\n    const [filas, setFilas] = useState(3);\r\n    const [columnas, setColumnas] = useState(3);\r\n    const salaContexto = useContext(salaContext);\r\n    const {altoCollage, largoCollage } = salaContexto;\r\n    const canvasCollage = React.createRef(); //Crea la referencia del canvas del Collage donde se pegan los murales\r\n    const refInput = React.createRef(); //Crea la referencia al input que permite abrir el mural\r\n\r\n    const handleChange = e => {\r\n        const canvasAlm = canvasAlmaCollage.current; //El current del Almacen\r\n        const canvasMu = canvasCollage.current;       //El current del Mural\r\n        const ctxMural = canvasMu.getContext('2d'); //Crea el contexto donde pintará el mosaico seleccionado\r\n        let rect = canvasMu.getBoundingClientRect();\r\n        let x = e.clientX - rect.left; //Obtiene coordenada X donde el usuario dio clic\r\n        let y = e.clientY - rect.top; // Obtiene coordenada Y donde el usuario dio clic\r\n        let xIniCollage = obtenerXinicialCollage(x, columnas, largoCollage);\r\n        let yIniCollage = obtenerYinicialCollage(y, filas, altoCollage);\r\n        let xFinCollage = obtenerLargoSeccionCollage(x, columnas, largoCollage);\r\n        let yFinCollage = obtenerAltoSeccionCollage(y, filas, altoCollage);\r\n        ctxMural.drawImage(canvasAlm, 0, 0, canvasAlm.width-1, canvasAlm.height-1, xIniCollage, yIniCollage, xFinCollage, yFinCollage); //Estampa el mosaico en el Mural\r\n        let dataImg = canvasMu.toDataURL(); //convierte la imagen a una cadena base 64\r\n        localStorage.setItem('collage', dataImg); //guarda la cadena en base 64 en el Local Storage\r\n    }\r\n\r\n    function limpiaColage(){\r\n        const canvasRef = canvasCollage;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.lineWidth = 1;\r\n        ctx.lineCap = 'butt';\r\n        ctx.fill('nonzero');\r\n        ctx.fillStyle = 'black';\r\n        ctx.strokeStyle = 'white';\r\n        ctx.clearRect(0, 0, largoCollage,altoCollage);\r\n        ctx.fillRect(0, 0, largoCollage,altoCollage);\r\n        ctx.beginPath();\r\n        let tamColumnas =  largoCollage / columnas;\r\n        for (let xx = 0; xx < columnas; xx++) {\r\n            ctx.moveTo((tamColumnas * xx),0);\r\n            ctx.lineTo((tamColumnas * xx), altoCollage);\r\n            ctx.stroke();\r\n        }\r\n        let tamFilas = altoCollage / filas;\r\n        for (let yy = 0; yy < filas; yy++) {\r\n            ctx.moveTo(0,(tamFilas * yy));\r\n            ctx.lineTo(largoCollage,(tamFilas * yy));\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    const imprimir = () => {\r\n        const canvasRef = canvasCollage;\r\n        const canvas = canvasRef.current;\r\n        let canvasdwn = document.createElement('canvas'); //Crea el canvas que va a descargar\r\n        canvasdwn.width = largoCollage; //le coloca el largo del canvas dependiendo de los mosaicos\r\n        canvasdwn.height = altoCollage;//coloca el alto del canvas\r\n        var destCtx = canvasdwn.getContext('2d');\r\n        destCtx.drawImage(canvas, 0, 0); //Copia la imagen del canvas del almacen al canvas que va a descargar con el tamaño mínimo necesario\r\n        let downloadLink = document.createElement('a');\r\n        downloadLink.setAttribute('download', 'collage.png');\r\n        let dataURL = canvasdwn.toDataURL('image/png');\r\n\r\n        var windowContent = '<img src=\"' + dataURL + '\">';\r\n        var printWin = window.open('','','width=800,height=600');\r\n        printWin.document.open();\r\n        printWin.document.write(windowContent);\r\n        printWin.document.close();\r\n        printWin.focus();\r\n        printWin.print();\r\n    }\r\n\r\n    const guardar = () => {\r\n        const canvasRef = canvasCollage;\r\n        const canvas = canvasRef.current;\r\n        let canvasdwn = document.createElement('canvas'); //Crea el canvas que va a descargar\r\n        canvasdwn.width = largoCollage; //le coloca el largo del canvas dependiendo de los mosaicos\r\n        canvasdwn.height = altoCollage;//coloca el alto del canvas\r\n        var destCtx = canvasdwn.getContext('2d');\r\n        destCtx.drawImage(canvas, 0, 0); //Copia la imagen del canvas del almacen al canvas que va a descargar con el tamaño mínimo necesario\r\n        let downloadLink = document.createElement('a');\r\n        downloadLink.setAttribute('download', 'collage.png');\r\n        let dataURL = canvasdwn.toDataURL('image/png');\r\n        let url = dataURL.replace(/^data:image\\/png/,'data:application/octet-stream');\r\n        downloadLink.setAttribute('href',url);\r\n        downloadLink.click();\r\n    }\r\n\r\n    const abrirCollageBtn = e => {\r\n        const canvasRef = canvasCollage;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'black';\r\n        ctx.strokeStyle = 'white';  \r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      \r\n        const img = new Image();\r\n        const file = e.target.files[0];\r\n        const reader = new FileReader();\r\n        reader.addEventListener(\"load\", function () {\r\n          img.src = reader.result;\r\n        }, false);\r\n      \r\n        if (file) {\r\n          reader.readAsDataURL(file);\r\n        }\r\n     \r\n        img.onload = function() {\r\n          ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight);\r\n        };\r\n    }\r\n\r\n    const asignarFilas = e => {\r\n        setFilas(e.target.value);\r\n    }\r\n\r\n    const asignarColumnas = e => {\r\n        setColumnas(e.target.value);\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const collage = localStorage.getItem('collage');\r\n        const canvasRef = canvasCollage;\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        if(collage === null){\r\n            console.log('No hay nada en Storage')\r\n            limpiaColage();  \r\n        }else{\r\n            console.log('Si hay algo');\r\n            let img = new Image();\r\n            img.src = collage;\r\n            ctx.restore();\r\n            ctx.drawImage(img, 0,0,canvas.width, canvas.height)\r\n            img.onload = function() {\r\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n            }\r\n        } \r\n    }, [])\r\n\r\n    useEffect(() => {   \r\n        limpiaColage(); \r\n        // eslint-disable-next-line\r\n    }, [filas, columnas])\r\n\r\n    return ( \r\n        <div className={`${styles.collages_y_toolbar}`}  >\r\n            <div className={`${styles.cont_collage}`}  >\r\n                <canvas\r\n                    ref={canvasCollage}\r\n                    width={largoCollage}\r\n                    height={altoCollage}\r\n                    onClick={handleChange}\r\n                />\r\n            </div>\r\n            <div className={`${styles.toolbar}`}  >\r\n                <p>Filas.</p>\r\n                <select \r\n                    id='filas'\r\n                    onChange={asignarFilas}\r\n                    className={`${styles.selector}`}\r\n                    defaultValue= \"3\">\r\n                    <option value=\"1\">1</option>\r\n                    <option value=\"2\">2</option>\r\n                    <option value=\"3\">3</option>\r\n                    <option value=\"4\">4</option>\r\n                    <option value=\"5\">5</option>\r\n                </select>\r\n\r\n                <p>Columnas.</p>\r\n                <select \r\n                    id='columnas' \r\n                    onChange={asignarColumnas}\r\n                    className={`${styles.selector}`}\r\n                    defaultValue= \"3\">\r\n                    <option value=\"1\">1</option>\r\n                    <option value=\"2\">2</option>\r\n                    <option value=\"3\">3</option>\r\n                    <option value=\"4\">4</option>\r\n                    <option value=\"5\">5</option>\r\n                </select>\r\n\r\n                            <Button\r\n                                component=\"label\"\r\n                            >\r\n                                <input\r\n                                    type=\"file\"\r\n                                    id=\"fileUpload\"\r\n                                    style={{ display: \"none\" }}\r\n                                    onChange={abrirCollageBtn}\r\n                                    ref={refInput}\r\n                                />\r\n                                <FolderOpenIcon\r\n                                    style={{ fontSize: 35 }}\r\n                                ></FolderOpenIcon>\r\n                            </Button>\r\n\r\n                            <Button\r\n                                type=\"button\"\r\n                                onClick={ () => guardar() }\r\n                            >\r\n                            <SaveIcon\r\n                                style={{ fontSize: 35 }}\r\n                            >\r\n                            </SaveIcon>\r\n                            </Button>\r\n\r\n                            <Button\r\n                                        type=\"button\"\r\n                                        onClick={ () => limpiaColage() }\r\n                                    >\r\n                                <DeleteOutlineIcon\r\n                                    style={{ fontSize: 35 }}\r\n                                ></DeleteOutlineIcon>\r\n                            </Button>\r\n\r\n                            <Button\r\n                                        type=\"button\"\r\n                                        onClick={ () => imprimir() }\r\n                                    >\r\n                                <PrintIcon\r\n                                    style={{ fontSize: 35 }}\r\n                                ></PrintIcon>\r\n                            </Button>          \r\n                </div>\r\n            </div>\r\n     );\r\n});\r\n\r\nCollages.protoTypes = {\r\n    ref: PropTypes.node.isRequired \r\n}\r\n \r\nexport default Collages;","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Programacion.js",["149","150","151","152"],"import React, { useContext } from 'react';\r\nimport salaContext from '../context/salas/salaContext'\r\nimport styles from './Programacion.module.css';\r\nimport Controles from './Controles';\r\nimport Panelprograma from './Panelprograma';\r\n\r\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport Button from '@material-ui/core/Button';\r\nimport PrintIcon from '@material-ui/icons/Print';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n\r\nconst Programacion = React.forwardRef((props,ref) => {\r\n    const salaContexto = useContext(salaContext);\r\n    const { alto, largo, separacion, mosSeleccionado } = salaContexto;\r\n    const canvasAlmacenes = ref;  // Toma la referencia del canvas del Almacen que se pasa por parámetro en la llamada del componente\r\n    const canvasMural = React.createRef(); //Crea la referencia del canvas del Mural donde se pegan los mosaicos\r\n    const refInput = React.createRef(); //Crea la referencia al input que permite abrir el mural\r\n    /***********************************/  \r\n    /*FUNCIONES DE LA SALA MURALES */\r\n    /******************************** */\r\n    function limpiaMuralBtn(){\r\n        const canvasMu = canvasMural.current;       //El current del Mural\r\n        const ctxMural = canvasMu.getContext('2d');\r\n        limpiaMural(ctxMural);\r\n    }\r\n\r\n    function limpiaMural(ctx){\r\n        ctx.fillStyle = 'black';\r\n        ctx.fillRect(0, 0, (12*largo)+13, (8*largo)+9);\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeStyle = 'white';\r\n        for (let xx = 0; xx <= 12; xx++) {\r\n            ctx.moveTo((alto * xx)+xx,0);\r\n            ctx.lineTo((alto * xx)+xx, (8*alto)+9);\r\n            ctx.stroke();\r\n        }\r\n        for (let xx = 0; xx <= 8; xx++) {\r\n            ctx.moveTo(0,(largo * xx)+xx);\r\n            ctx.lineTo((largo * 12 ) + 12,(largo * xx)+xx);\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    const abrirMuralBtn = e => {\r\n        const canvas = canvasMural.current;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'white';\r\n        ctx.strokeStyle = 'white';  \r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      \r\n        const img = new Image();\r\n        const file = e.target.files[0];\r\n        const reader = new FileReader();\r\n     \r\n        reader.addEventListener(\"load\", function () {\r\n          img.src = reader.result;\r\n        }, false);\r\n      \r\n        if (file) {\r\n          reader.readAsDataURL(file);\r\n        }\r\n     \r\n        img.onload = function() {\r\n          ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight);\r\n        };\r\n    }\r\n\r\n    const guardar = () => {\r\n            const canvas = canvasMural.current;\r\n            let canvasdwn = document.createElement('canvas'); //Crea el canvas que va a descargar\r\n            canvasdwn.width = (12*largo)+13; //le coloca el largo del canvas dependiendo de los mosaicos\r\n            canvasdwn.height = (8*alto)+9;//coloca el alto del canvas\r\n            var destCtx = canvasdwn.getContext('2d');\r\n            destCtx.drawImage(canvas, 0, 0); //Copia la imagen del canvas del almacen al canvas que va a descargar con el tamaño mínimo necesario\r\n            let downloadLink = document.createElement('a');\r\n            downloadLink.setAttribute('download', 'mural.png');\r\n            let dataURL = canvasdwn.toDataURL('image/png');\r\n            let url = dataURL.replace(/^data:image\\/png/,'data:application/octet-stream');\r\n            downloadLink.setAttribute('href',url);\r\n            downloadLink.click();\r\n    }\r\n\r\n    const imprimir = () => {\r\n        const canvas = canvasMural.current;\r\n        let canvasdwn = document.createElement('canvas'); //Crea el canvas que va a descargar\r\n        canvasdwn.width = (12*largo)+13; //le coloca el largo del canvas dependiendo de los mosaicos\r\n        canvasdwn.height = (8*alto)+9;//coloca el alto del canvas\r\n        var destCtx = canvasdwn.getContext('2d');\r\n        destCtx.drawImage(canvas, 0, 0); //Copia la imagen del canvas del almacen al canvas que va a descargar con el tamaño mínimo necesario\r\n        let downloadLink = document.createElement('a');\r\n        downloadLink.setAttribute('download', 'mural.png');\r\n        let dataURL = canvasdwn.toDataURL('image/png');\r\n        var windowContent = '<img src=\"' + dataURL + '\">';\r\n        var printWin = window.open('','','width=800,height=600');\r\n        printWin.document.open();\r\n        printWin.document.write(windowContent);\r\n        printWin.document.close();\r\n        printWin.focus();\r\n        printWin.print();\r\n    }\r\n    /* ********************************* */\r\n    /* FIN DE LAS FUNCIONES DE MURALES */\r\n    /* ********************************* */\r\n\r\n    return ( \r\n        <div>\r\n            <Controles>\r\n\r\n            </Controles>\r\n            <div className={`${styles.cont_programacion}`}  >\r\n                <canvas\r\n                        ref={canvasMural}\r\n                        width={(12*largo)+13}\r\n                        height={(8*largo)+9}\r\n                        className={`${styles.canvas_mural}`}\r\n                />\r\n                <div className={`${styles.toolbar}`}  >\r\n                        <Button\r\n                            component=\"label\"\r\n                        >\r\n                            <input\r\n                                type=\"file\"\r\n                                id=\"fileUpload\"\r\n                                style={{ display: \"none\" }}\r\n                                onChange={abrirMuralBtn}\r\n                                ref={refInput}\r\n                            />\r\n                            <FolderOpenIcon\r\n                                style={{ fontSize: 35 }}\r\n                            ></FolderOpenIcon>\r\n                        </Button>\r\n\r\n                        <Button\r\n                            type=\"button\"\r\n                            onClick={ () => guardar() }\r\n                        >\r\n                            <SaveIcon\r\n                                style={{ fontSize: 35 }}\r\n                            ></SaveIcon>\r\n                        </Button>\r\n\r\n                        <Button\r\n                            type=\"button\"\r\n                            onClick={ () => limpiaMuralBtn() }\r\n                        >\r\n                            <DeleteOutlineIcon\r\n                                style={{ fontSize: 35 }}\r\n                            ></DeleteOutlineIcon>\r\n                        </Button>\r\n\r\n                        <Button\r\n                            type=\"button\"\r\n                            onClick={ () => imprimir() }\r\n                        >\r\n                            <PrintIcon\r\n                                style={{ fontSize: 35 }}\r\n                            ></PrintIcon>\r\n                        </Button>\r\n                </div>\r\n                <Panelprograma>\r\n\r\n                </Panelprograma>\r\n            </div>\r\n        </div> \r\n    );\r\n});\r\n \r\nexport default Programacion;","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\helper.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Amosaico.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\types\\imgbotones.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Colores.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Figuras.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Mosaico.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Variantes.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Player.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Sala.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Almacencollages.js",["153","154","155"],"import React, { useState, useContext, useEffect } from 'react';\r\nimport salaContext from '../context/salas/salaContext';\r\nimport styles from './Almacencollages.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst Almacencollages = React.forwardRef((props,ref) => {\r\n\r\n    const refInput = React.createRef();\r\n    const mural1 = React.createRef();\r\n    const mural2 = React.createRef();\r\n    const mural3 = React.createRef();\r\n    const mural4 = React.createRef();\r\n    const mural5 = React.createRef();\r\n    const mural6 = React.createRef();\r\n    const mural7 = React.createRef();\r\n    const mural8 = React.createRef();\r\n    const mural9 = React.createRef();\r\n    const mural10 = React.createRef();\r\n\r\n    const salaContexto = useContext(salaContext);\r\n    const { almacenCollages, setAlmacenCollages} = salaContexto;\r\n    const canvasRef = ref;\r\n    const componentsMap = [ mural1, mural2, mural3, mural4, mural5, mural6, mural7, mural8, mural9, mural10 ];\r\n\r\n    const [muralSeleccionado, setMuralSeleccionado] = useState(0);\r\n\r\n    useEffect(() => {\r\n        eliminartodos();\r\n    }, [])\r\n\r\n    useEffect (()=>{\r\n        if (almacenCollages<=0){\r\n            setAlmacenCollages(0);\r\n            setMuralSeleccionado(0);\r\n        }\r\n    }, [almacenCollages]);\r\n\r\n\r\n    const abrirAlmacen = e => {\r\n        let canvas;\r\n        switch (almacenCollages) {\r\n            case 0:\r\n                canvas = mural1.current;\r\n                break;\r\n            case 1:\r\n                canvas = mural2.current;\r\n                break;\r\n            case 2:\r\n                canvas = mural3.current;\r\n                break;\r\n            case 3:\r\n                canvas = mural4.current;\r\n                break;\r\n            case 4:\r\n                canvas = mural5.current;\r\n                break;\r\n            case 5:\r\n                canvas = mural6.current;\r\n                break;\r\n            case 6:\r\n                canvas = mural7.current;\r\n                break;\r\n            case 7:\r\n                canvas = mural8.current;\r\n                break;\r\n            case 8:\r\n                canvas = mural9.current;\r\n                break;\r\n            case 9:\r\n                canvas = mural10.current;\r\n                break;\r\n            default:\r\n                canvas = mural1.current;\r\n                break;\r\n        }\r\n            const ctx = canvas.getContext('2d');\r\n            ctx.fillStyle = 'white';\r\n            ctx.strokeStyle = 'white';  \r\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n            const img = new Image();\r\n            const file = e.target.files[0];\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", function () {\r\n                img.src = reader.result;\r\n            }, false);\r\n                \r\n            if (file) {\r\n                reader.readAsDataURL(file);\r\n            }\r\n              \r\n            img.onload = function() {\r\n              ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n            };\r\n            setAlmacenCollages(almacenCollages + 1);\r\n        \r\n        setMuralSeleccionado(0)\r\n    }\r\n\r\n    const handleChange = e => {\r\n        if(parseInt(e.target.parentElement.id, 10) <= almacenCollages){\r\n            setMuralSeleccionado(parseInt(e.target.parentElement.id, 10));\r\n            const canvasAlm = e.currentTarget; //El current del Almacen\r\n            const canvasSel = ref.current;       //El current del mosaico seleccionado oculto\r\n            const ctxAlm = canvasAlm.getContext('2d');  //Crea el contexto donde tomará el mosaico seleccionado\r\n            const ctxMuralSel = canvasSel.getContext('2d'); //Crea el contexto donde pintará el mosaico seleccionado\r\n            var imgMural = ctxAlm.getImageData(0,0, canvasAlm.width-1, canvasAlm.height-1);//Toma el mosaico del almacen\r\n            ctxMuralSel.putImageData(imgMural, 0, 0); //Estampa el mosaico en el Mural\r\n        }\r\n    }\r\n\r\n    const eliminartodos = () => {\r\n        let canv;\r\n        let canvas;\r\n        let ctx;\r\n        for (let index = 0; index < 10; index++) {\r\n            canv = componentsMap[index];\r\n            canvas = canv.current;\r\n            ctx = canvas.getContext('2d');\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height); \r\n        }\r\n        setMuralSeleccionado(0);\r\n        setAlmacenCollages(0);\r\n    }\r\n\r\n    const borrarMural = () => {\r\n        if (muralSeleccionado > 0 && almacenCollages > 0){\r\n            let canv1;\r\n            let canv2;\r\n            let canvas1;\r\n            let canvas2;\r\n            let ctx1;\r\n            for (let index = muralSeleccionado; index < almacenCollages; index++) {\r\n                canv1 = componentsMap[index - 1];\r\n                canv2 = componentsMap[index];\r\n                canvas1 = canv1.current;\r\n                canvas2 = canv2.current;\r\n                ctx1 = canvas1.getContext('2d');\r\n                ctx1.drawImage(canvas2, 0, 0);\r\n            }\r\n            canv1 = componentsMap[almacenCollages - 1];\r\n            canvas1 = canv1.current;\r\n            ctx1 = canvas1.getContext('2d');\r\n            ctx1.clearRect(0, 0, canvas1.width, canvas1.height);\r\n            setAlmacenCollages(almacenCollages - 1 );\r\n            setMuralSeleccionado(0);\r\n        }\r\n    }\r\n\r\n\r\n    return ( \r\n        <div className={`${styles.tercera_seccion}`} >\r\n            <div className={`${styles.contenedor_almacen_collages}`} >\r\n                <div className={(1 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='1'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='11'\r\n                            ref={mural1}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(2 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='2'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='12'\r\n                            ref={mural2}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(3 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='3'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='13'\r\n                            ref={mural3}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(4 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='4'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='14'\r\n                            ref={mural4}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(5 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='5'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='15'\r\n                            ref={mural5}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(6 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='6'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='16'\r\n                            ref={mural6}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(7 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='7'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='17'\r\n                            ref={mural7}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(8 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='8'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='18'\r\n                            ref={mural8}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(9 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='9'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='19'\r\n                            ref={mural9}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n                <div className={(10 === muralSeleccionado) ? `${styles.cont_mural_almacen_sel}` : `${styles.cont_mural_almacen}`}\r\n                    id='10'>\r\n                        <canvas className={`${styles.mural_collage}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='20'\r\n                            ref={mural10}\r\n                            onClick={handleChange}\r\n                        />\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                    <Button\r\n                        component=\"label\"\r\n                    >\r\n                        <input\r\n                            type=\"file\"\r\n                            id=\"fileUpload\"\r\n                            style={{ display: \"none\" }}\r\n                            onChange={abrirAlmacen}\r\n                            ref={refInput}\r\n                        />\r\n                        <FolderOpenIcon\r\n                            style={{ fontSize: 35 }}\r\n                        ></FolderOpenIcon>\r\n                    </Button>\r\n\r\n                    <Button\r\n                            type=\"button\"\r\n                            onClick={ () => borrarMural() }\r\n                        >\r\n                        <HighlightOffIcon\r\n                            style={{ fontSize: 35 }}                    \r\n                        ></HighlightOffIcon>\r\n                    </Button>\r\n    \r\n                    <Button\r\n                                type=\"button\"\r\n                                onClick={ () => eliminartodos() }\r\n                            >\r\n                        <DeleteOutlineIcon\r\n                            style={{ fontSize: 35 }}\r\n                        ></DeleteOutlineIcon>\r\n                    </Button>\r\n\r\n            </div>\r\n            <canvas className={`${styles.mural_oculto}`}\r\n                            width='493px'\r\n                            height='329px'\r\n                            id='21'\r\n                            ref={ref}\r\n            />\r\n        </div>\r\n     );\r\n});\r\n\r\nAlmacencollages.protoTypes = {\r\n    ref: PropTypes.node.isRequired \r\n}\r\n \r\nexport default Almacencollages;","D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Controles.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Panelprograma.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Nuevainstruccion.js",["156","157"],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Errorinput.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\programa\\programaState.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\programa\\programaReducer.js",["158"],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\context\\programa\\programaContext.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Instruccionclass.js",[],"D:\\Rodrigo\\react\\mosaicos_magicos\\src\\components\\Instruccion.js",[],{"ruleId":"159","replacedBy":"160"},{"ruleId":"161","replacedBy":"162"},{"ruleId":"163","severity":1,"message":"164","line":42,"column":8,"nodeType":"165","endLine":42,"endColumn":10,"suggestions":"166"},{"ruleId":"163","severity":1,"message":"167","line":57,"column":8,"nodeType":"165","endLine":57,"endColumn":24,"suggestions":"168"},{"ruleId":"169","severity":1,"message":"170","line":208,"column":29,"nodeType":"171","endLine":208,"endColumn":53},{"ruleId":"163","severity":1,"message":"172","line":156,"column":8,"nodeType":"165","endLine":156,"endColumn":10,"suggestions":"173"},{"ruleId":"174","severity":1,"message":"175","line":12,"column":8,"nodeType":"176","messageId":"177","endLine":12,"endColumn":17},{"ruleId":"174","severity":1,"message":"178","line":18,"column":26,"nodeType":"176","messageId":"177","endLine":18,"endColumn":36},{"ruleId":"174","severity":1,"message":"179","line":18,"column":38,"nodeType":"176","messageId":"177","endLine":18,"endColumn":53},{"ruleId":"174","severity":1,"message":"180","line":19,"column":11,"nodeType":"176","messageId":"177","endLine":19,"endColumn":26},{"ruleId":"174","severity":1,"message":"181","line":27,"column":11,"nodeType":"176","messageId":"177","endLine":27,"endColumn":20},{"ruleId":"163","severity":1,"message":"182","line":34,"column":8,"nodeType":"165","endLine":34,"endColumn":10,"suggestions":"183"},{"ruleId":"163","severity":1,"message":"184","line":41,"column":8,"nodeType":"165","endLine":41,"endColumn":25,"suggestions":"185"},{"ruleId":"174","severity":1,"message":"186","line":6,"column":8,"nodeType":"176","messageId":"177","endLine":6,"endColumn":18},{"ruleId":"174","severity":1,"message":"187","line":17,"column":10,"nodeType":"176","messageId":"177","endLine":17,"endColumn":24},{"ruleId":"188","severity":1,"message":"189","line":4,"column":1,"nodeType":"190","endLine":13,"endColumn":2},"no-native-reassign",["191"],"no-negated-in-lhs",["192"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'canvasRef', 'largo', 'separacion', 'setAlmacen', and 'setMosSeleccionado'. Either include them or remove the dependency array.","ArrayExpression",["193"],"React Hook useEffect has missing dependencies: 'almacen', 'alto', 'canvasRef', 'largo', 'separacion', and 'setGuardarAlmacen'. Either include them or remove the dependency array.",["194"],"react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","React Hook useEffect has missing dependencies: 'canvasCollage' and 'limpiaColage'. Either include them or remove the dependency array.",["195"],"no-unused-vars","'PropTypes' is defined but never used.","Identifier","unusedVar","'separacion' is assigned a value but never used.","'mosSeleccionado' is assigned a value but never used.","'canvasAlmacenes' is assigned a value but never used.","'canvasRef' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'eliminartodos'. Either include it or remove the dependency array.",["196"],"React Hook useEffect has a missing dependency: 'setAlmacenCollages'. Either include it or remove the dependency array.",["197"],"'DeleteIcon' is defined but never used.","'nvaInstruccion' is assigned a value but never used.","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation",{"desc":"198","fix":"199"},{"desc":"200","fix":"201"},{"desc":"202","fix":"203"},{"desc":"204","fix":"205"},{"desc":"206","fix":"207"},"Update the dependencies array to be: [canvasRef, largo, separacion, setAlmacen, setMosSeleccionado]",{"range":"208","text":"209"},"Update the dependencies array to be: [almacen, alto, canvasRef, guardarAlmacen, largo, separacion, setGuardarAlmacen]",{"range":"210","text":"211"},"Update the dependencies array to be: [canvasCollage, limpiaColage]",{"range":"212","text":"213"},"Update the dependencies array to be: [eliminartodos]",{"range":"214","text":"215"},"Update the dependencies array to be: [almacenCollages, setAlmacenCollages]",{"range":"216","text":"217"},[1910,1912],"[canvasRef, largo, separacion, setAlmacen, setMosSeleccionado]",[2779,2795],"[almacen, alto, canvasRef, guardarAlmacen, largo, separacion, setGuardarAlmacen]",[6970,6972],"[canvasCollage, limpiaColage]",[1336,1338],"[eliminartodos]",[1491,1508],"[almacenCollages, setAlmacenCollages]"]